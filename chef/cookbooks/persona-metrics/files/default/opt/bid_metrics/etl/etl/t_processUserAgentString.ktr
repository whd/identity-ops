<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>process_user_agent_string</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;</directory>
    <parameters>
        <parameter>
            <name>UA_FILE</name>
            <default_value>mozilla5</default_value>
            <description/>
        </parameter>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>N</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>N</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>Y</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <created_user/>
  <created_date>2010&#47;10&#47;15 16:56:04.156</created_date>
  <modified_user>-</modified_user>
  <modified_date>2010&#47;10&#47;01 17:05:36.781</modified_date>
  </info>
  <notepads>
    <notepad>
      <note>split the UAs into tokens                                                                                </note>
      <xloc>472</xloc>
      <yloc>62</yloc>
      <width>361</width>
      <heigth>22</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>255</fontcolorred>
      <fontcolorgreen>255</fontcolorgreen>
      <fontcolorblue>255</fontcolorblue>
      <backgroundcolorred>64</backgroundcolorred>
      <backgroundcolorgreen>0</backgroundcolorgreen>
      <backgroundcolorblue>64</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>parse the UA  looking for platform, browser, etc.                                                                             </note>
      <xloc>478</xloc>
      <yloc>189</yloc>
      <width>467</width>
      <heigth>22</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>255</fontcolorred>
      <fontcolorgreen>255</fontcolorgreen>
      <fontcolorblue>255</fontcolorblue>
      <backgroundcolorred>64</backgroundcolorred>
      <backgroundcolorgreen>0</backgroundcolorgreen>
      <backgroundcolorblue>64</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>Results!                </note>
      <xloc>507</xloc>
      <yloc>2043</yloc>
      <width>100</width>
      <heigth>23</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>255</fontcolorred>
      <fontcolorgreen>255</fontcolorgreen>
      <fontcolorblue>255</fontcolorblue>
      <backgroundcolorred>64</backgroundcolorred>
      <backgroundcolorgreen>0</backgroundcolorgreen>
      <backgroundcolorblue>64</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>

IMPORTANT! Run set_regexp.ktr first!

</note>
      <xloc>240</xloc>
      <yloc>11</yloc>
      <width>203</width>
      <heigth>60</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>
E
N
G
I
N
E






</note>
      <xloc>439</xloc>
      <yloc>233</yloc>
      <width>24</width>
      <heigth>172</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>



B
R
O
W
S
E
R






</note>
      <xloc>437</xloc>
      <yloc>482</yloc>
      <width>26</width>
      <heigth>222</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>O
P
E
R
A
T
I
N
G

S
Y
S
T
E
M










</note>
      <xloc>441</xloc>
      <yloc>851</yloc>
      <width>25</width>
      <heigth>334</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>
L
O
C
A
L




</note>
      <xloc>440</xloc>
      <yloc>1428</yloc>
      <width>24</width>
      <heigth>135</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>P
L
A
T
F
O
R
M</note>
      <xloc>440</xloc>
      <yloc>1267</yloc>
      <width>24</width>
      <heigth>110</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>OUTPUT FIELDS

os_category
os
platform
browser_category
browser_name
browser_version
engine_1
engine_2
locale

</note>
      <xloc>694</xloc>
      <yloc>1926</yloc>
      <width>103</width>
      <heigth>159</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>S
P
I
D
E
R
S
,

E
T
C
.</note>
      <xloc>40</xloc>
      <yloc>1705</yloc>
      <width>24</width>
      <heigth>172</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>The code in the UDJC is a workaround needed because of a a bug in Kettle 4.1.
A fix to the FieldHelper was commited in 4.2 trunk.
Eventually, a reevaluation will have to be made.
2010-12-03</note>
      <xloc>3</xloc>
      <yloc>170</yloc>
      <width>404</width>
      <heigth>60</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>                                              










</note>
      <xloc>768</xloc>
      <yloc>1697</yloc>
      <width>150</width>
      <heigth>147</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>101</backgroundcolorred>
      <backgroundcolorgreen>220</backgroundcolorgreen>
      <backgroundcolorblue>205</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>https:&#47;&#47;bugzilla.mozilla.org&#47;show_bug.cgi?id=885467
---------------------------------------------------------------------------------------------------------------------
https:&#47;&#47;github.com&#47;mozilla&#47;browserid&#47;blob&#47;dev&#47;lib&#47;coarse_user_agent_parser.js

 os_matchers = {...
        &#47;&#47; http:&#47;&#47;lawrencemandel.com&#47;2012&#47;07&#47;27&#47;decision-made-firefox-os-user-agent-string&#47;
        &apos;FirefoxOS&apos;: &apos;Mozilla&#47;5.0 (Mobile; rv:&apos;,
...}</note>
      <xloc>692</xloc>
      <yloc>1109</yloc>
      <width>492</width>
      <heigth>119</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>9</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>192</backgroundcolorred>
      <backgroundcolorgreen>192</backgroundcolorgreen>
      <backgroundcolorblue>192</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
  <order>
  <hop> <from>sample user agents</from><to>Filter empty rows</to><enabled>N</enabled> </hop>  <hop> <from>eval engine</from><to>eval engine II</to><enabled>Y</enabled> </hop>  <hop> <from>locale list</from><to>lk locale</to><enabled>Y</enabled> </hop>  <hop> <from>local</from><to>lk locale</to><enabled>Y</enabled> </hop>  <hop> <from>lk locale</from><to>locale</to><enabled>Y</enabled> </hop>  <hop> <from>removing extra chars</from><to>&quot;un-split&quot; (custom)</to><enabled>Y</enabled> </hop>  <hop> <from>&quot;un-split&quot; (custom)</from><to>eval engine</to><enabled>Y</enabled> </hop>  <hop> <from>clean versions (remove first &quot;&#47;&quot;, &quot;-&quot;, &quot;:&quot;)</from><to>valid browser version?</to><enabled>Y</enabled> </hop>  <hop> <from>valid browser version?</from><to>[fuzzy] browser</to><enabled>Y</enabled> </hop>  <hop> <from>match_browser_name to lower</from><to>lk browser category</to><enabled>Y</enabled> </hop>  <hop> <from>eval browser</from><to>eval browser II</to><enabled>Y</enabled> </hop>  <hop> <from>eval browser II</from><to>match_browser_name to lower</to><enabled>Y</enabled> </hop>  <hop> <from>lk browser category</from><to>lk 2nd browser category</to><enabled>Y</enabled> </hop>  <hop> <from>browser</from><to>browser_name to lower</to><enabled>Y</enabled> </hop>  <hop> <from>browser_name to lower</from><to>lk browser category</to><enabled>Y</enabled> </hop>  <hop> <from>browser_name to lower</from><to>lk 2nd browser category</to><enabled>Y</enabled> </hop>  <hop> <from>eval os</from><to>eval os 2nd</to><enabled>Y</enabled> </hop>  <hop> <from>lk os name &amp; category</from><to>lk snd os name &amp; category</to><enabled>Y</enabled> </hop>  <hop> <from>eval os 2nd</from><to>match_os_name to lower</to><enabled>Y</enabled> </hop>  <hop> <from>match_os_name to lower</from><to>lk os name &amp; category</to><enabled>Y</enabled> </hop>  <hop> <from>os list</from><to>ua_os_name to lower</to><enabled>Y</enabled> </hop>  <hop> <from>ua_os_name to lower</from><to>lk os name &amp; category</to><enabled>Y</enabled> </hop>  <hop> <from>ua_os_name to lower</from><to>lk snd os name &amp; category</to><enabled>Y</enabled> </hop>  <hop> <from>browser_name unknown?</from><to>browser II</to><enabled>Y</enabled> </hop>  <hop> <from>lk snd os name &amp; category</from><to>match_os_name unknown?</to><enabled>Y</enabled> </hop>  <hop> <from>match_os_name unknown?</from><to>os II</to><enabled>Y</enabled> </hop>  <hop> <from>eval platform</from><to>platform not found and is Windows or Mac?</to><enabled>Y</enabled> </hop>  <hop> <from>platform not found and is Windows or Mac?</from><to>platform = os_category</to><enabled>Y</enabled> </hop>  <hop> <from>platform not found and is Windows or Mac?</from><to>platform</to><enabled>Y</enabled> </hop>  <hop> <from>browser II</from><to>clean versions (remove first &quot;&#47;&quot;, &quot;-&quot;, &quot;:&quot;)</to><enabled>Y</enabled> </hop>  <hop> <from>browser_name unknown?</from><to>clean versions (remove first &quot;&#47;&quot;, &quot;-&quot;, &quot;:&quot;)</to><enabled>Y</enabled> </hop>  <hop> <from>valid browser version?</from><to>eval os</to><enabled>Y</enabled> </hop>  <hop> <from>[fuzzy] browser</from><to>eval os</to><enabled>Y</enabled> </hop>  <hop> <from>platform = os_category</from><to>local</to><enabled>Y</enabled> </hop>  <hop> <from>platform</from><to>local</to><enabled>Y</enabled> </hop>  <hop> <from>engine 1, 2</from><to>eval browser</to><enabled>Y</enabled> </hop>  <hop> <from>eval engine II</from><to>engine 1, 2</to><enabled>Y</enabled> </hop>  <hop> <from>os_version list</from><to>lk replacements</to><enabled>Y</enabled> </hop>  <hop> <from>os II</from><to>lk replacements</to><enabled>Y</enabled> </hop>  <hop> <from>match_os_name unknown?</from><to>lk replacements</to><enabled>Y</enabled> </hop>  <hop> <from>lk replacements</from><to>os</to><enabled>Y</enabled> </hop>  <hop> <from>lk 2nd browser category</from><to>browser_name unknown?</to><enabled>Y</enabled> </hop>  <hop> <from>eval spider</from><to>eval proxy</to><enabled>Y</enabled> </hop>  <hop> <from>eval proxy</from><to>eval utility</to><enabled>Y</enabled> </hop>  <hop> <from>remove fields</from><to>Select values</to><enabled>Y</enabled> </hop>  <hop> <from>Mapping input specification</from><to>Filter empty rows</to><enabled>Y</enabled> </hop>  <hop> <from>locale</from><to>remove fields</to><enabled>Y</enabled> </hop>  <hop> <from>eval utility</from><to>none of the previous?</to><enabled>Y</enabled> </hop>  <hop> <from>none of the previous?</from><to>browser_name</to><enabled>Y</enabled> </hop>  <hop> <from>none of the previous?</from><to>remove unused</to><enabled>Y</enabled> </hop>  <hop> <from>browser_name</from><to>remove unused</to><enabled>Y</enabled> </hop>  <hop> <from>remove unused</from><to>Select values 2</to><enabled>Y</enabled> </hop>  <hop> <from>Dummy (do nothing)</from><to>output</to><enabled>N</enabled> </hop>  <hop> <from>Select values 2</from><to>Dummy (do nothing)</to><enabled>Y</enabled> </hop>  <hop> <from>Dummy (do nothing)</from><to>Mapping output specification</to><enabled>Y</enabled> </hop>  <hop> <from>Unknown?</from><to>eval spider</to><enabled>Y</enabled> </hop>  <hop> <from>Unknown?</from><to>Dummy (do nothing)</to><enabled>Y</enabled> </hop>  <hop> <from>Token separator</from><to>removing extra chars</to><enabled>Y</enabled> </hop>  <hop> <from>Dummy (do nothing)</from><to>Filter rows</to><enabled>N</enabled> </hop>  <hop> <from>Filter rows</from><to>ua_output</to><enabled>N</enabled> </hop>  <hop> <from>Dummy (do nothing)</from><to>ua_output</to><enabled>N</enabled> </hop>  <hop> <from>Select values</from><to>FirefoxHome?</to><enabled>Y</enabled> </hop>  <hop> <from>FirefoxHome?</from><to>os_category &#47; platform</to><enabled>Y</enabled> </hop>  <hop> <from>os_category &#47; platform</from><to>Unknown?</to><enabled>Y</enabled> </hop>  <hop> <from>Filter empty rows</from><to>removing non printable</to><enabled>Y</enabled> </hop>  <hop> <from>removing non printable</from><to>Token separator</to><enabled>Y</enabled> </hop>  <hop> <from>sample user_agent</from><to>Filter empty rows</to><enabled>N</enabled> </hop>  <hop> <from>os</from><to>is FirefoxOS?</to><enabled>Y</enabled> </hop>  <hop> <from>is FirefoxOS?</from><to>os=FirefoxOS</to><enabled>Y</enabled> </hop>  <hop> <from>is FirefoxOS?</from><to>eval platform</to><enabled>Y</enabled> </hop>  <hop> <from>os=FirefoxOS</from><to>eval platform</to><enabled>Y</enabled> </hop>  <hop> <from>FirefoxHome?</from><to>Unknown?</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>&quot;un-split&quot; (custom)</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>user_agent_token</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Maemo^Browser^</replace_string>
        <replace_by_string>Maemo Browser </replace_by_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>user_agent_token</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Opera^</replace_string>
        <replace_by_string>Opera </replace_by_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>791</xloc>
      <yloc>111</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Dummy (do nothing)</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>537</xloc>
      <yloc>1908</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter empty rows</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>user_agent</leftvalue>
 <function>&lt;&gt;</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text/><length>-1</length><precision>-1</precision><isnull>Y</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>159</xloc>
      <yloc>111</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter rows</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>browser_name</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text>Unknown</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>589</xloc>
      <yloc>2135</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>FirefoxHome?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>os_category &#47; platform</send_true_to>
<send_false_to>Unknown?</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>browser_name</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text>FirefoxHome</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>831</xloc>
      <yloc>1711</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Mapping input specification</name>
    <type>MappingInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>user_agent</name>
        <type>String</type>
        <length>1024</length>
        <precision>-1</precision>
      </field>
        <select_unspecified>Y</select_unspecified>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>66</xloc>
      <yloc>24</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Mapping output specification</name>
    <type>MappingOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>470</xloc>
      <yloc>1978</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select values</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>user_agent</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>engine_1</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>engine_2</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>browser_name</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>browser_category</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>browser_version</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>os_category</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>os</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>platform</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>locale</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>Y</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>830</xloc>
      <yloc>1617</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select values 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>user_agent</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>engine_1</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>engine_2</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>browser_name</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>browser_category</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>browser_version</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>os_category</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>os</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>platform</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>locale</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>Y</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>212</xloc>
      <yloc>1908</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Token separator</name>
    <type>UserDefinedJavaClass</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>

    <definitions>
        <definition>
        <class_type>TRANSFORM_CLASS</class_type>

        <class_name>Processor</class_name>

        <class_source><![CDATA[private int outputRowSize;
private ValueMetaInterface inFieldMeta;
private int inFieldIndex;
private int outFieldIndex;

public boolean processRow(StepMetaInterface smi, StepDataInterface sdi)
throws KettleException
{
Object[] r = getRow();
if (r == null) {
setOutputDone();
return false;
}

if (first) {
first = false;

// Set up dynamic in/out meta
logMinimal("data.inputRowMeta before fixup: " +
data.inputRowMeta.toStringMeta());
data.inputRowMeta = getInputRowMeta();
logMinimal("data.inputRowMeta after fixup: " +
data.inputRowMeta.toString());
logMinimal("data.outputRowMeta before fixup: " +
data.outputRowMeta.toString());
data.outputRowMeta = data.inputRowMeta.clone();
meta.getFields(data.outputRowMeta, getStepname(), null, null, parent);
logMinimal("data.outputRowMeta after fixup: " +
data.outputRowMeta.toString());
outputRowSize = data.outputRowMeta.size();

// Workaround for PDI-4981, FieldHelpers not working in subtrans with dyn fields
inFieldMeta = data.inputRowMeta.searchValueMeta("user_agent");
inFieldIndex = data.inputRowMeta.indexOfValue("user_agent");
outFieldIndex = data.outputRowMeta.indexOfValue("user_agent_token");
}

    r = RowDataUtil.createResizedCopy(r, outputRowSize);

    // String user_agent = get(Fields.In, "user_agent").getString(r);
	String user_agent = inFieldMeta.getString(r[inFieldIndex]);

	int len = user_agent.length();

	StringBuilder user_agent_token = new StringBuilder();
	
	char current=' '; //C:comment; P:product
	int qty=0; // quantity of open '('

	for (int i=0;i<len;i++) {

	char ch = user_agent.charAt(i);
	
	switch(ch) {
		case ')':
			qty--;
			user_agent_token.append('^');
/*
			if (qty==0) {
				user_agent_token.append('^');
			}
			else{
				user_agent_token.append(ch);
			}
*/
			break;
		case '(':
			user_agent_token.append('^');
/*
			if (qty==0){ // beginning of a comment
				user_agent_token.append('^');
			}
			else{
				user_agent_token.append(ch);
			}
*/
			current='C';
			qty++;
	  		break;
		case ' ':
			if (current!='C') // space outside a comment
				user_agent_token.append('^');
			else
				user_agent_token.append(' ');
	  		break;
		case ';':
			user_agent_token.append('^');
			/*
			if (current=='C') // ; inside a comment
				user_agent_token.append('^');
			else
				user_agent_token.append(';');
			*/
	  		break;
		case '[':
		case ']':
			user_agent_token.append('^');
	  		break;
		default:
			if ( current!= 'P' && i > 0  && qty==0 ){
			  current='P';
			}			
			user_agent_token.append(ch);
		}
	}
	
	// get(Fields.Out, "user_agent_token").setValue(r, user_agent_token.toString());
	r[outFieldIndex] = user_agent_token.toString();

	putRow(data.outputRowMeta, r);

	return true;
}
]]></class_source>
        </definition>
    </definitions>
    <fields>
        <field>
        <field_name>user_agent_token</field_name>

        <field_type>String</field_type>

        <field_length>-1</field_length>

        <field_precision>-1</field_precision>

        </field>
    </fields><clear_result_fields>N</clear_result_fields>
<info_steps></info_steps><target_steps></target_steps><usage_parameters></usage_parameters>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>484</xloc>
      <yloc>111</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Unknown?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>eval spider</send_true_to>
<send_false_to>Dummy (do nothing)</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>browser_name</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>String</type><text>Unknown</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>537</xloc>
      <yloc>1711</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>[fuzzy] browser</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>browser_name</field_name>
<formula_string>browser_name + &quot; [Fuzzy]&quot;</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>browser_name</replace_field>
</formula>
       <formula><field_name>browser_version</field_name>
<formula_string>&quot;&quot;</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>browser_version</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>897</xloc>
      <yloc>661</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>browser</name>
    <type>ExcelInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <header>Y</header>
    <noempty>Y</noempty>
    <stoponempty>N</stoponempty>
    <filefield/>
    <sheetfield/>
    <sheetrownumfield/>
    <rownumfield/>
    <sheetfield/>
    <filefield/>
    <limit>0</limit>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <accept_filenames>N</accept_filenames>
    <accept_field/>
    <accept_stepname/>
    <file>
      <name>${Internal.Transformation.Filename.Directory}\tables.xls</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>browser_name</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format/>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>browser_category</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format/>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>browser_priority</name>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format/>
        <currency/>
        <decimal/>
        <group/>
      </field>
    </fields>
    <sheets>
      <sheet>
        <name>browser</name>
        <startrow>0</startrow>
        <startcol>0</startcol>
        </sheet>
    </sheets>
    <strict_types>N</strict_types>
    <error_ignored>N</error_ignored>
    <error_line_skipped>N</error_line_skipped>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <spreadsheet_type>JXL</spreadsheet_type>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1132</xloc>
      <yloc>483</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>browser II</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>browser_name</field_name>
<formula_string>browser_name_II</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>browser_name</replace_field>
</formula>
       <formula><field_name>browser_category</field_name>
<formula_string>browser_category_II</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>browser_category</replace_field>
</formula>
       <formula><field_name>match_browser_version</field_name>
<formula_string>match_browser_version_II</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>match_browser_version</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>559</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>browser_name</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>browser_name</field_name>
<formula_string>is_spider?&quot;Spider&#47;Bot&quot;:(is_proxy?&quot;Proxy&quot;:&quot;Download Utility&quot;)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>browser_name</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>212</xloc>
      <yloc>1801</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>browser_name to lower</name>
    <type>Janino</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>browser_name_lower</field_name>
<formula_string>browser_name.toLowerCase()</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1030</xloc>
      <yloc>483</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>browser_name unknown?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>browser II</send_true_to>
<send_false_to>clean versions (remove first &quot;&#47;&quot;, &quot;-&quot;, &quot;:&quot;)</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>browser_name</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text>Unknown</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>607</xloc>
      <yloc>559</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>clean versions (remove first &quot;&#47;&quot;, &quot;-&quot;, &quot;:&quot;)</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>match_browser_version</in_stream_name>
        <out_stream_name>browser_version</out_stream_name>
        <use_regex>yes</use_regex>
        <replace_string>^(&#47;|\-|:|\s)</replace_string>
        <replace_by_string/>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>662</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>engine 1, 2</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>engine_1</field_name>
<formula_string>match_engine_name+((match_engine_version==null)?&quot;&quot;:match_engine_version)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>engine_2</field_name>
<formula_string>match_engine_name_II+((match_engine_version_II==null)?&quot;&quot;:match_engine_version_II)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>319</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval browser</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[(?i).*(^|\^)(${BROWSER_LIST})(.*?)(\^|$).*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>browser_identified</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>unused_b1</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>match_browser_name</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_browser_version</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull>&#47;</ifnull>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>unused_b2</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>483</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval browser II</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[(?i).*(^|\^)(${BROWSER_LIST_2ND})(.*?)(\^|$).*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>browser_II_identified</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>unused_b3</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>match_browser_name_II</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_browser_version_II</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull>&#47;</ifnull>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>unused_b4</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>607</xloc>
      <yloc>483</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval engine</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[.*(^|\^)(${ENGINE_LIST})(.*?)(\^|$).*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>engine_identified</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>unused_e1</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>match_engine_name</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull>Unknown</ifnull>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_engine_version</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>unused_e2</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>230</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval engine II</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[.*(^|\^)(${ENGINE_LIST_2ND})(.*?)(\^|$).*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>engine_II_identified</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>unused_e3</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>match_engine_name_II</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull>Unknown</ifnull>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_engine_version_II</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>unused_e4</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>618</xloc>
      <yloc>230</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval os</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[(?i).*(^|\^)(${OS_LIST})(.*?)(\^|$).*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>os_identified</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>unused_o1</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>match_os_name</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_os_version</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>unused_o2</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval os 2nd</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[(?i).*(^|\^)(${OS_LIST_2ND})(.*?)(\^|$).*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>os_II_identified</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>unused_o3</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>match_os_name_II</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_os_version_II</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>unused_o4</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>620</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval platform</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[.*(^|\^)(${PLATFORM_LIST})(.*?)(\^|$).*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>platform_identified</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>unused_p1</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>match_platform_name</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull>Other</ifnull>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_platform_extra</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull> </ifnull>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>unused_platb2</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>1271</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval proxy</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[${PROXY}]]></script>    <matcher>user_agent</matcher>
    <resultfieldname>is_proxy</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>N</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>212</xloc>
      <yloc>1711</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval spider</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[${ROBOT_SPIDER_CRAWLER}]]></script>    <matcher>user_agent</matcher>
    <resultfieldname>is_spider</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>N</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>315</xloc>
      <yloc>1711</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>eval utility</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[${DOWNLOAD_UTILITY}]]></script>    <matcher>user_agent</matcher>
    <resultfieldname>is_utility</resultfieldname>
    <usevar>Y</usevar>
    <allowcapturegroups>N</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>119</xloc>
      <yloc>1711</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>is FirefoxOS?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>os=FirefoxOS</send_true_to>
<send_false_to>eval platform</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>user_agent</leftvalue>
 <function>CONTAINS</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text>Mozilla&#47;5.0 (Mobile; rv:</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>1117</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>lk 2nd browser category</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>browser_name to lower</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>match_browser_name_II</name>
        <field>browser_name_lower</field>
      </key>
      <value>
        <name>browser_name</name>
        <rename>browser_name_II</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
      <value>
        <name>browser_category</name>
        <rename>browser_category_II</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>897</xloc>
      <yloc>559</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>lk browser category</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>browser_name to lower</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>match_browser_name</name>
        <field>browser_name_lower</field>
      </key>
      <value>
        <name>browser_name</name>
        <rename>browser_name</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
      <value>
        <name>browser_category</name>
        <rename>browser_category</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>898</xloc>
      <yloc>483</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>lk locale</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>locale list</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>match_locale</name>
        <field>cod</field>
      </key>
      <value>
        <name>locale</name>
        <rename>desc_locale</rename>
        <default>unknown</default>
        <type>String</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>726</xloc>
      <yloc>1446</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>lk os name &amp; category</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>ua_os_name to lower</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>match_os_name</name>
        <field>ua_os_name_lower</field>
      </key>
      <value>
        <name>os_name</name>
        <rename>os_name</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
      <value>
        <name>os_category</name>
        <rename>os_category</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>889</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>lk replacements</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>os_version list</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>os_name</name>
        <field>found_os</field>
      </key>
      <key>
        <name>match_os_version</name>
        <field>found_version</field>
      </key>
      <value>
        <name>new_name</name>
        <rename>new_name</rename>
        <default>keep_old</default>
        <type>String</type>
      </value>
      <value>
        <name>new_version</name>
        <rename>new_version</rename>
        <default>keep_old</default>
        <type>String</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>630</xloc>
      <yloc>1029</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>lk snd os name &amp; category</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>ua_os_name to lower</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>match_os_name_II</name>
        <field>ua_os_name_lower</field>
      </key>
      <value>
        <name>os_name</name>
        <rename>os_name_II</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
      <value>
        <name>os_category</name>
        <rename>os_category_II</rename>
        <default>Unknown</default>
        <type>String</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>889</xloc>
      <yloc>944</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>local</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[.*\^([a-zA-Z][a-zA-Z])(\-[a-zA-Z][a-zA-Z]|)\^.*]]></script>    <matcher>user_agent_token</matcher>
    <resultfieldname>is_locale</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>match_locale</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
      <field>
        <name>match_locale_extra</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>both</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>559</xloc>
      <yloc>1446</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>locale</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>locale</field_name>
<formula_string>(desc_locale.equals(&quot;unknown&quot;))?&quot;unknown&quot;: match_locale+(match_locale_extra==null?&quot;&quot;:match_locale_extra)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>726</xloc>
      <yloc>1533</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>locale list</name>
    <type>ExcelInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <header>Y</header>
    <noempty>Y</noempty>
    <stoponempty>N</stoponempty>
    <filefield/>
    <sheetfield/>
    <sheetrownumfield/>
    <rownumfield/>
    <sheetfield/>
    <filefield/>
    <limit>0</limit>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <accept_filenames>N</accept_filenames>
    <accept_field/>
    <accept_stepname/>
    <file>
      <name>${Internal.Transformation.Filename.Directory}\tables.xls</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>cod</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
        <format/>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>locale</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
        <format/>
        <currency/>
        <decimal/>
        <group/>
      </field>
    </fields>
    <sheets>
      <sheet>
        <name>locale</name>
        <startrow>0</startrow>
        <startcol>0</startcol>
        </sheet>
    </sheets>
    <strict_types>N</strict_types>
    <error_ignored>N</error_ignored>
    <error_line_skipped>N</error_line_skipped>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <spreadsheet_type>JXL</spreadsheet_type>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1113</xloc>
      <yloc>1446</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>match_browser_name to lower</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>match_browser_name</field_name>
<formula_string>match_browser_name==null?&quot;Unknown&quot;:match_browser_name.toLowerCase()</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>match_browser_name</replace_field>
</formula>
       <formula><field_name>match_browser_name_II</field_name>
<formula_string>match_browser_name_II==null?&quot;&quot;:match_browser_name_II.toLowerCase()</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>match_browser_name_II</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>749</xloc>
      <yloc>483</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>match_os_name to lower</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>match_os_name</field_name>
<formula_string>match_os_name==null?&quot;Unknown&quot;:match_os_name.toLowerCase()</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>match_os_name</replace_field>
</formula>
       <formula><field_name>match_os_name_II</field_name>
<formula_string>match_os_name_II==null?&quot;&quot;:match_os_name_II.toLowerCase()</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>match_os_name_II</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>762</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>match_os_name unknown?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>os II</send_true_to>
<send_false_to>lk replacements</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>match_os_name</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text>Unknown</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>764</xloc>
      <yloc>944</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>none of the previous?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>remove unused</send_true_to>
<send_false_to>browser_name</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>is_spider</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>Boolean</type><text>N</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>AND</operator>
   <leftvalue>is_proxy</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>Boolean</type><text>N</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>AND</operator>
   <leftvalue>is_utility</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>Boolean</type><text>N</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>119</xloc>
      <yloc>1801</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>os</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>os</field_name>
<formula_string>(new_name.equals(&quot;keep_old&quot;))?(os_name+&quot; &quot;+((match_os_version==null)?&quot;&quot;:match_os_version)):new_name+&quot; &quot;+(new_version==null?&quot;&quot;:new_version)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>495</xloc>
      <yloc>1029</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>os II</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>os_name</field_name>
<formula_string>os_name_II</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>os_name</replace_field>
</formula>
       <formula><field_name>os_category</field_name>
<formula_string>os_category_II</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>os_category</replace_field>
</formula>
       <formula><field_name>match_os_version</field_name>
<formula_string>match_os_version_II</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>match_os_version</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>630</xloc>
      <yloc>944</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>os list</name>
    <type>ExcelInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <header>Y</header>
    <noempty>Y</noempty>
    <stoponempty>N</stoponempty>
    <filefield/>
    <sheetfield/>
    <sheetrownumfield/>
    <rownumfield/>
    <sheetfield/>
    <filefield/>
    <limit>0</limit>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <accept_filenames>N</accept_filenames>
    <accept_field/>
    <accept_stepname/>
    <file>
      <name>${Internal.Transformation.Filename.Directory}\tables.xls</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>ua_os_name</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>os_name</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>os_category</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>os_priority</name>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
    </fields>
    <sheets>
      <sheet>
        <name>os</name>
        <startrow>0</startrow>
        <startcol>0</startcol>
        </sheet>
    </sheets>
    <strict_types>N</strict_types>
    <error_ignored>N</error_ignored>
    <error_line_skipped>N</error_line_skipped>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <spreadsheet_type>JXL</spreadsheet_type>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1146</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>os=FirefoxOS</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>os</field_name>
<formula_string>&quot;FirefoxOS&quot;</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>os</replace_field>
</formula>
       <formula><field_name>os_category</field_name>
<formula_string>&quot;mobile&quot;</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>os_category</replace_field>
</formula>
       <formula><field_name>browser_name</field_name>
<formula_string>&quot;Firefox Mobile (FFOS)&quot;</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>browser_name</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>630</xloc>
      <yloc>1116</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>os_category &#47; platform</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>os_category</field_name>
<formula_string>&quot;Mobile&quot;</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>os_category</replace_field>
</formula>
       <formula><field_name>platform</field_name>
<formula_string>&quot;iPhone&#47;iPod&#47;iPad&quot;</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>platform</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>832</xloc>
      <yloc>1791</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>os_version list</name>
    <type>ExcelInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <header>Y</header>
    <noempty>Y</noempty>
    <stoponempty>N</stoponempty>
    <filefield/>
    <sheetfield/>
    <sheetrownumfield/>
    <rownumfield/>
    <sheetfield/>
    <filefield/>
    <limit>0</limit>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <accept_filenames>N</accept_filenames>
    <accept_field/>
    <accept_stepname/>
    <file>
      <name>${Internal.Transformation.Filename.Directory}\tables.xls</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>found_os</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>found_version</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>new_name</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
      <field>
        <name>new_version</name>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
        <format>#</format>
        <currency/>
        <decimal/>
        <group/>
      </field>
    </fields>
    <sheets>
      <sheet>
        <name>os_version</name>
        <startrow>0</startrow>
        <startcol>0</startcol>
        </sheet>
    </sheets>
    <strict_types>N</strict_types>
    <error_ignored>N</error_ignored>
    <error_line_skipped>N</error_line_skipped>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <spreadsheet_type>JXL</spreadsheet_type>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1146</xloc>
      <yloc>1029</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>output</name>
    <type>ExcelOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <header>Y</header>
    <footer>N</footer>
    <encoding/>
    <append>N</append>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>${Internal.Transformation.Filename.Directory}&#47;files&#47;${UA_FILE}_parsed</name>
      <extention>xls</extention>
      <do_not_open_newfile_init>Y</do_not_open_newfile_init>
      <create_parent_folder>N</create_parent_folder>
      <split>N</split>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <sheetname>Sheet1</sheetname>
      <autosizecolums>N</autosizecolums>
      <nullisblank>N</nullisblank>
      <protect_sheet>N</protect_sheet>
      <password>Encrypted </password>
      <splitevery>0</splitevery>
      <usetempfiles>N</usetempfiles>
      <tempdirectory/>
      </file>
    <template>
      <enabled>N</enabled>
      <append>N</append>
      <filename>template.xls</filename>
    </template>
    <fields>
      <field>
        <name>user_agent</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>engine_1</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>engine_2</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>browser_name</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>browser_category</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>browser_version</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>os_category</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>os</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>platform</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>locale</name>
        <type>String</type>
        <format/>
      </field>
    </fields>
    <custom>
    <header_font_name>arial</header_font_name>
    <header_font_size>10</header_font_size>
    <header_font_bold>N</header_font_bold>
    <header_font_italic>N</header_font_italic>
    <header_font_underline>no</header_font_underline>
    <header_font_orientation>horizontal</header_font_orientation>
    <header_font_color>none</header_font_color>
    <header_background_color>none</header_background_color>
    <header_row_height/>
    <header_alignment>left</header_alignment>
    <header_image/>
    <row_font_name>arial</row_font_name>
    <row_font_size>10</row_font_size>
    <row_font_color>none</row_font_color>
    <row_background_color>none</row_background_color>
      </custom>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>615</xloc>
      <yloc>1935</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>platform</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>platform</field_name>
<formula_string>match_platform_name+((match_platform_extra==null)?&quot;&quot;:match_platform_extra)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>560</xloc>
      <yloc>1342</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>platform = os_category</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>platform</field_name>
<formula_string>os_category</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>739</xloc>
      <yloc>1342</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>platform not found and is Windows or Mac?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>platform = os_category</send_true_to>
<send_false_to>platform</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>platform_identified</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>Boolean</type><text>N</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>AND</operator>
   <leftvalue>os_category</leftvalue>
   <function>IN LIST</function>
   <rightvalue/>
   <value><name>constant</name><type>String</type><text>Windows;Macintosh</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>656</xloc>
      <yloc>1271</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>remove fields</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>user_agent_token</name>
      </remove>      <remove>        <name>engine_identified</name>
      </remove>      <remove>        <name>unused_e1</name>
      </remove>      <remove>        <name>match_engine_name</name>
      </remove>      <remove>        <name>match_engine_version</name>
      </remove>      <remove>        <name>unused_e2</name>
      </remove>      <remove>        <name>engine_II_identified</name>
      </remove>      <remove>        <name>unused_e3</name>
      </remove>      <remove>        <name>match_engine_name_II</name>
      </remove>      <remove>        <name>match_engine_version_II</name>
      </remove>      <remove>        <name>unused_e4</name>
      </remove>      <remove>        <name>browser_identified</name>
      </remove>      <remove>        <name>unused_b1</name>
      </remove>      <remove>        <name>match_browser_name</name>
      </remove>      <remove>        <name>match_browser_version</name>
      </remove>      <remove>        <name>unused_b2</name>
      </remove>      <remove>        <name>browser_II_identified</name>
      </remove>      <remove>        <name>unused_b3</name>
      </remove>      <remove>        <name>match_browser_name_II</name>
      </remove>      <remove>        <name>match_browser_version_II</name>
      </remove>      <remove>        <name>unused_b4</name>
      </remove>      <remove>        <name>browser_name_II</name>
      </remove>      <remove>        <name>browser_category_II</name>
      </remove>      <remove>        <name>os_identified</name>
      </remove>      <remove>        <name>unused_o1</name>
      </remove>      <remove>        <name>match_os_name</name>
      </remove>      <remove>        <name>match_os_version</name>
      </remove>      <remove>        <name>unused_o2</name>
      </remove>      <remove>        <name>os_II_identified</name>
      </remove>      <remove>        <name>unused_o3</name>
      </remove>      <remove>        <name>match_os_name_II</name>
      </remove>      <remove>        <name>match_os_version_II</name>
      </remove>      <remove>        <name>unused_o4</name>
      </remove>      <remove>        <name>os_name</name>
      </remove>      <remove>        <name>os_name_II</name>
      </remove>      <remove>        <name>os_category_II</name>
      </remove>      <remove>        <name>platform_identified</name>
      </remove>      <remove>        <name>unused_p1</name>
      </remove>      <remove>        <name>match_platform_name</name>
      </remove>      <remove>        <name>match_platform_extra</name>
      </remove>      <remove>        <name>unused_platb2</name>
      </remove>      <remove>        <name>is_locale</name>
      </remove>      <remove>        <name>match_locale</name>
      </remove>      <remove>        <name>match_locale_extra</name>
      </remove>      <remove>        <name>desc_locale</name>
      </remove>      <remove>        <name>new_name</name>
      </remove>      <remove>        <name>new_version</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>726</xloc>
      <yloc>1617</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>remove unused</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>is_spider</name>
      </remove>      <remove>        <name>is_proxy</name>
      </remove>      <remove>        <name>is_utility</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>119</xloc>
      <yloc>1908</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>removing extra chars</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>user_agent_token</field_name>
<formula_string>user_agent_token.replaceAll(&quot;\\^ &quot;,&quot;\\^&quot;).replaceAll(&quot; \\^&quot;,&quot;\\^&quot;).replaceAll(&quot;\\^\\^&quot;,&quot;\\^&quot;)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>user_agent_token</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>637</xloc>
      <yloc>111</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>removing non printable</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>user_agent</field_name>
<formula_string>user_agent.replaceAll(&quot;[\\p{Cntrl}]*&quot;, &quot;&quot;)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field>user_agent</replace_field>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>329</xloc>
      <yloc>111</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>sample user agents</name>
    <type>CsvInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <filename>${Internal.Transformation.Filename.Directory}&#47;files&#47;ua_sample.txt</filename>
    <filename_field/>
    <rownum_field/>
    <include_filename>N</include_filename>
    <separator>###</separator>
    <enclosure/>
    <header>N</header>
    <buffer_size>50000</buffer_size>
    <lazy_conversion>N</lazy_conversion>
    <add_filename_result>N</add_filename_result>
    <parallel>N</parallel>
    <newline_possible>Y</newline_possible>
    <encoding/>
    <fields>
      <field>
        <name>user_agent</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>1024</length>
        <precision>-1</precision>
        <trim_type>right</trim_type>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>50</xloc>
      <yloc>111</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>sample user_agent</name>
    <type>DataGrid</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>user_agent</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>1024</length>
        <precision>-1</precision>
      </field>
    </fields>
    <data>
      <line> <item>Mozilla&#47;5.0 (Mobile; rv:18.0) Gecko&#47;18.0 Firefox&#47;18.0</item> </line>
    </data>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>58</xloc>
      <yloc>263</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ua_os_name to lower</name>
    <type>Janino</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>ua_os_name_lower</field_name>
<formula_string>ua_os_name.toLowerCase()</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1032</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ua_output</name>
    <type>TextFileOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <separator>|</separator>
    <enclosure>&quot;</enclosure>
    <enclosure_forced>N</enclosure_forced>
    <enclosure_fix_disabled>N</enclosure_fix_disabled>
    <header>Y</header>
    <footer>N</footer>
    <format>DOS</format>
    <compression>None</compression>
    <encoding/>
    <endedLine/>
    <fileNameInField>N</fileNameInField>
    <fileNameField/>
    <create_parent_folder>N</create_parent_folder>
    <file>
      <name>${Internal.Transformation.Filename.Directory}&#47;ua_output</name>
      <is_command>N</is_command>
      <servlet_output>N</servlet_output>
      <do_not_open_new_file_init>Y</do_not_open_new_file_init>
      <extention>txt</extention>
      <append>N</append>
      <split>N</split>
      <haspartno>N</haspartno>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <add_to_result_filenames>Y</add_to_result_filenames>
      <pad>N</pad>
      <fast_dump>N</fast_dump>
      <splitevery>0</splitevery>
    </file>
    <fields>
      <field>
        <name>user_agent</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>engine_1</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>engine_2</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>browser_name</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>browser_category</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>browser_version</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>os_category</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>os</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>platform</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>locale</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>685</xloc>
      <yloc>2121</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>valid browser version?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>eval os</send_true_to>
<send_false_to>[fuzzy] browser</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>browser_version</leftvalue>
   <function>IS NULL</function>
   <rightvalue/>
   <value><name>constant</name><type>String</type><text>^[1-9].*</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <leftvalue>browser_version</leftvalue>
   <function>REGEXP</function>
   <rightvalue/>
   <value><name>constant</name><type>String</type><text>^(v|)[0-9].*</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>781</xloc>
      <yloc>661</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>
